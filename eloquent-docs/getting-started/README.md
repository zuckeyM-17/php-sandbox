# Eloquent: はじめに

## 導入

Laravelに含まれるEloquent ORMはデータベースを扱うための美しくシンプルなActiveRecordの実装です。データベースのテーブルはそれぞれ、「モデル」に該当しテーブルと相互に影響します。モデルによって、新しいレコードを挿入するといったように、テーブルに対してクエリを発行することができます。  

始める前に、`config/database.php`にあるデータベースの接続の設定を確認しましょう。データベース設定に関するより詳しい情報は、[このドキュメント](https://laravel.com/docs/5.5/database#configuration)を参照して下さい。

## モデル定義
### Eloquentモデルの構成要素

## 値の取得
### コレクション
### ChunkとCursor

数1000行ものEloquentのレコードを処理する場合、`chunk`を利用します。`chunk`メソッドはEloquentのモデルを"塊"で取得し、それを引数として受け取ったクロージャに渡して処理をします。`chunk`メソッドを使うことによって、巨大なクエリ結果を扱うような処理において、メモリ使用量を防ぐことができます。

```
Flight::chunk(200, function ($flights) {
    foreach ($flights as $flight) {
        //
    }
});
```

`chunk`メソッドの第1引数は取得する"塊"ごとのレコードの数です。第2引数として渡されるクロージャは、データベースから取得した塊ごとに呼ばれます。そのため、クロージャに"塊"を渡すたびに、毎度クエリが発行されます。

#### Cursorを使う

`cursor`メソッドはカーソルを利用して、ただ1回のクエリによってデータベースから取りだしたリストに対し1行ずつ処理を繰り返すことができます。大量のデータを処理する場合、`cursor`メソッドによってメモリ使用量をかなり削減することができます。

```
foreach (Flight::where('foo', 'bar')->cursor() as $flight) {
    //
}
```

## 単一の / 集約された モデルを取得
### 集約されたモデルを取得

## モデルの挿入 / 更新
### 挿入
### 更新
### Mass Assignment
### その他の生成系メソッド

## モデルの削除
### ソフトデリート
### ソフトデリートされたモデルの検索

## クエリのスコープ
### グローバルなスコープ
### 制限されたスコープ

## イベント
### オブザーバー